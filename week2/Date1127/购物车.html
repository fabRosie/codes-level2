<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>罗茜的购物车</title>
    <style>
      img {
        width: 100px;
      }
      input {
        width: 30px;
      }
      td {
        text-align: right;
      }
    </style>
  </head>

  <body>
    <button >添加商品</button>
    <table border="1">
      <tr>
        <th>名称</th>
        <th>图片</th>
        <th>单价</th>
        <th>操作</th>
        <th>总价</th>
      </tr>
      <tr>
        <td>卫龙辣条1</td>
        <td><img src="img/id1.jpg" alt="" /></td>
        <td>3.5</td>
        <td>
          <button onclick="sub(this)">-</button>
          <input type="text" value="1" />
          <button onclick="add(this)">+</button>
          <button >删除</button>
        </td>
        <td>0</td>
      </tr>
      <tr>
        <td>卫龙辣条2</td>
        <td><img src="img/id2.jpg" alt="" /></td>
        <td>4</td>
        <td>
          <button onclick="sub(this)">-</button>
          <input type="text" value="1" />
          <button onclick="add(this)">+</button>
          <button >删除</button>
        </td>
        <td>0</td>
      </tr>
      <tr>
        <td>卫龙辣条3</td>
        <td><img src="img/id3.jpg" alt="" /></td>
        <td>5</td>
        <td>
          <button onclick="sub(this)">-</button>
          <input type="text" value="1" />
          <button onclick="add(this)">+</button>
          <button >删除</button>
        </td>
        <td>0</td>
      </tr>
      <tr>
        <!-- 总价格 -->
        <td colspan="5">0</td>
      </tr>
    </table>
    <script>
        function add(btn){
            const input=btn.previousElementSibling;
            const td=btn.parentElement;
            const unitPrice=td.previousElementSibling.innerText;
            const tbody=document.querySelector('table tbody');
            let totalPrice=td.nextElementSibling;
            input.value++;
            totalPrice.innerText=input.value*unitPrice;
            let totalAll=Number(tbody.lastElementChild.firstElementChild.innerText);
            console.log(Number(totalPrice.innerText))
            totalAll+=Number(totalPrice.innerText);
            tbody.lastElementChild.firstElementChild.innerText=totalAll;
            console.log(totalAll);
        }
        function sub(btn){
            const input=btn.nextElementSibling;
            const td=btn.parentElement;
            const unitPrice=td.previousElementSibling.innerText;
            const tbody=document.querySelector('table tbody');
            let totalPrice=td.nextElementSibling;
            if(input.value>0){input.value--;}
            totalPrice.innerText=input.value*unitPrice;
            let totalAll=Number(tbody.lastElementChild.firstElementChild.innerText);
            console.log(Number(totalPrice.innerText))
            totalAll+=Number(totalPrice.innerText);
            tbody.lastElementChild.firstElementChild.innerText=totalAll;
            console.log(totalAll);
        }
        const table=document.querySelector;
        
    </script>
  </body>
</html>
